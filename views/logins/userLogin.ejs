<%- include('../partials/header') -%>


    <div class="container">
        <div class="row justify-content-center">
            <div class="m-4">
                <form class="form">
                    <p class="title">User Login</p>
                    <p class="message">Sign in to access your account.</p>

                    <!-- Email -->
                    <label>
                        <input id="email" required="" placeholder="" type="email" minlength="8" class="input">
                        <span>Email</span>
                    </label>

                    <!-- Password -->
                    <label>
                        <input id="password" required="" placeholder="" type="password" minlength="8" maxlength="16"
                            class="input">
                        <span>Password</span>
                        <i class="toggle-password fa fa-eye"></i>
                    </label>

                    <button class="submit btn btn-primary">Submit</button>
                    <p class="signin">Don't have an account? <a href="register">Register</a></p>
                </form>
            </div>
        </div>
    </div>
    <script>
        $(document).ready(function () {

            /// --------------------------------------------------
            // User Defined functions
            // --------------------------------------------------
            function addLoadingSpinner() {
                $('#loading-overlay').addClass('loading-overlay');
                $('#spinner').addClass('spinner');
            }

            function removeLoadingSpinner() {
                $('#loading-overlay').removeClass('loading-overlay');
                $('#spinner').removeClass('spinner');
            }
            // -----------------------------------------------
            // -----------------------------------------------


            $('form').submit(function (event) {
                event.preventDefault();

                let email = $('#email').val().trim();
                let pass = $('#password').val().trim();

                let confirmOption = confirm("Are you sure to subimt?");
                if (confirmOption) {
                    addLoadingSpinner();
                    $.ajax({
                        type: 'POST',
                        url: '',
                        data: {
                            email: email,
                            pass: pass,
                        },
                        success: function (respone) {
                            if (respone.statusCode == 0) {
                                alert("Login successful! Redirecting to Homepage.");
                                window.location = '/user'
                            } else if (respone.statusCode == 1) {
                                alert("Email not registered, try registering new account!");
                            } else if (respone.statusCode == 2) {
                                alert("Incorrect Password, try again or reset your password!.");
                            } else {
                                alert("Unable to login, kindly try again later!");
                            }
                        },
                        error: function (error) {
                            alert("An unknown error has occured!");
                        },
                        complete: function (status) {
                            removeLoadingSpinner();
                        }
                    })
                }
            })
        })
    </script>

    <%- include('../partials/footer') -%>